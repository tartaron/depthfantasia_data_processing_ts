# DepthFantasia Data Processing Frontend

ë§µ ê¸°ë°˜ ì „íˆ¬ ë°ì´í„° ì‹œê°í™” í”Œë«í¼ì˜ í”„ë¡ íŠ¸ì—”ë“œ MVPì…ë‹ˆë‹¤.

## ê¸°ìˆ  ìŠ¤íƒ

- **Framework**: Next.js 14 (App Router)
- **Language**: TypeScript
- **Styling**: Tailwind CSS
- **Map Library**: Leaflet.js
- **State Management**: Zustand + React Query
- **HTTP Client**: Axios
- **File Upload**: React Dropzone

## í”„ë¡œì íŠ¸ êµ¬ì¡°

```
src/
â”œâ”€â”€ domain/          # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§, ì—”í‹°í‹°
â”‚   â”œâ”€â”€ entities/
â”‚   â”‚   â”œâ”€â”€ Battle.ts
â”‚   â”‚   â”œâ”€â”€ Map.ts
â”‚   â”‚   â””â”€â”€ Filter.ts
â”‚   â””â”€â”€ repositories/
â”‚       â””â”€â”€ IBattleRepository.ts
â”œâ”€â”€ application/     # ìœ ìŠ¤ì¼€ì´ìŠ¤, ì„œë¹„ìŠ¤
â”‚   â”œâ”€â”€ usecases/
â”‚   â”‚   â”œâ”€â”€ UploadBattleData.ts
â”‚   â”‚   â”œâ”€â”€ GetBattleData.ts
â”‚   â”‚   â””â”€â”€ FilterBattleData.ts
â”‚   â””â”€â”€ services/
â”‚       â””â”€â”€ BattleDataParser.ts
â”œâ”€â”€ infrastructure/  # ì™¸ë¶€ ì„œë¹„ìŠ¤, API
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ BattleAPI.ts
â”‚   â”‚   â””â”€â”€ mockApi.ts
â”‚   â”œâ”€â”€ repositories/
â”‚   â”‚   â””â”€â”€ BattleRepository.ts
â”‚   â””â”€â”€ services/
â”‚       â””â”€â”€ TileService.ts
â”œâ”€â”€ presentation/    # UI ì»´í¬ë„ŒíŠ¸, í˜ì´ì§€
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ map/
â”‚   â”‚   â”œâ”€â”€ upload/
â”‚   â”‚   â”œâ”€â”€ filter/
â”‚   â”‚   â””â”€â”€ battle/
â”‚   â”œâ”€â”€ store/
â”‚   â”‚   â”œâ”€â”€ battleStore.ts
â”‚   â”‚   â”œâ”€â”€ filterStore.ts
â”‚   â”‚   â””â”€â”€ uploadStore.ts
â”‚   â””â”€â”€ hooks/
â””â”€â”€ shared/         # ê³µí†µ ìœ í‹¸ë¦¬í‹°
    â”œâ”€â”€ constants/
    â”œâ”€â”€ types/
    â””â”€â”€ utils/
```

## ì£¼ìš” ê¸°ëŠ¥

### 1. ë°ì´í„° ì—…ë¡œë“œ
- JSON íŒŒì¼ ë“œë˜ê·¸ ì•¤ ë“œë¡­ ì—…ë¡œë“œ
- ëŒ€ìš©ëŸ‰ íŒŒì¼ ì²˜ë¦¬ (ìµœëŒ€ 100MB)
- ì‹¤ì‹œê°„ ì—…ë¡œë“œ ì§„í–‰ë¥  í‘œì‹œ
- ë°ì´í„° ê²€ì¦ ë° ì˜¤ë¥˜ ì²˜ë¦¬

### 2. ë§µ ë·°ì–´
- 6000x8000px ê³ í•´ìƒë„ ë§µ í‘œì‹œ
- Leaflet.js ê¸°ë°˜ ì¸í„°ë™í‹°ë¸Œ ë§µ
- ì¤Œ ë ˆë²¨ 10-18 ì§€ì›
- íƒ€ì¼ ê¸°ë°˜ ë Œë”ë§ìœ¼ë¡œ ì„±ëŠ¥ ìµœì í™”

### 3. ì „íˆ¬ ë§ˆì»¤
- í”Œë ˆì´ì–´/ëª¬ìŠ¤í„° êµ¬ë¶„ ë§ˆì»¤
- í•„ë“œë³„ ìƒ‰ìƒ êµ¬ë¶„
- í´ë¦­ ì‹œ ìƒì„¸ì •ë³´ íŒì—…
- ì‹¤ì‹œê°„ í•„í„°ë§ ì ìš©

### 4. í•„í„° ì‹œìŠ¤í…œ
- ë§µë³„ í•„í„°ë§
- ë©¤ë²„ ì´ë¦„ ê²€ìƒ‰
- ë³´ìƒ ë²”ìœ„ ì„¤ì • (ê²½í—˜ì¹˜/ê³¨ë“œ)
- ì‹¤ì‹œê°„ í•„í„° ê²°ê³¼ í‘œì‹œ

### 5. ì „íˆ¬ ìƒì„¸ì •ë³´
- ì „íˆ¬ ê¸°ë³¸ ì •ë³´
- ì°¸ì—¬ ë©¤ë²„ ëª©ë¡
- ë³´ìƒ ì •ë³´
- ì•¡ì…˜/ê²°ê³¼ ë¡œê·¸

## ì„¤ì¹˜ ë° ì‹¤í–‰

### 1. ì˜ì¡´ì„± ì„¤ì¹˜
```bash
npm install
```

### 2. ê°œë°œ ì„œë²„ ì‹¤í–‰
```bash
npm run dev
```

### 3. ë¹Œë“œ
```bash
npm run build
```

### 4. í”„ë¡œë•ì…˜ ì‹¤í–‰
```bash
npm start
```

## ë¬¸ì œ í•´ê²°

### PowerShell ì‹¤í–‰ ì •ì±… ì˜¤ë¥˜
Windows PowerShellì—ì„œ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ì´ ì°¨ë‹¨ëœ ê²½ìš°:
```powershell
Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser
```

### í¬íŠ¸ 3000ì´ ì´ë¯¸ ì‚¬ìš© ì¤‘ì¸ ê²½ìš°
ë‹¤ë¥¸ í¬íŠ¸ë¡œ ì‹¤í–‰:
```bash
npm run dev -- -p 3001
```

### Leaflet ê´€ë ¨ ì˜¤ë¥˜
- ë¸Œë¼ìš°ì € ìºì‹œë¥¼ ì§€ìš°ê³  ìƒˆë¡œê³ ì¹¨
- ê°œë°œì ë„êµ¬ì—ì„œ ì½˜ì†” ì˜¤ë¥˜ í™•ì¸

## í™˜ê²½ ì„¤ì •

### íƒ€ì¼ ì´ë¯¸ì§€ ì„¤ì •
ë§µ íƒ€ì¼ ì´ë¯¸ì§€ë¥¼ `public/maps/depthfantasia/tiles/` ë””ë ‰í† ë¦¬ì— ë‹¤ìŒê³¼ ê°™ì€ êµ¬ì¡°ë¡œ ë°°ì¹˜í•˜ì„¸ìš”:

```
public/maps/depthfantasia/
â”œâ”€â”€ tiles/
â”‚   â”œâ”€â”€ 10/
â”‚   â”œâ”€â”€ 11/
â”‚   â”œâ”€â”€ 12/
â”‚   â””â”€â”€ ...
â””â”€â”€ metadata.json
```

### API ì„¤ì •
í˜„ì¬ëŠ” Mock APIë¥¼ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì‹¤ì œ ë°±ì—”ë“œ APIë¡œ ì „í™˜í•˜ë ¤ë©´:

1. `src/infrastructure/api/BattleAPI.ts`ì—ì„œ ì‹¤ì œ API ì—”ë“œí¬ì¸íŠ¸ë¡œ ë³€ê²½
2. `src/infrastructure/repositories/BattleRepository.ts`ì—ì„œ ì‹¤ì œ API í´ë¼ì´ì–¸íŠ¸ ì‚¬ìš©

## ë°ì´í„° í˜•ì‹

### Battle JSON í˜•ì‹
```json
[
  {
    "id": 1,
    "map": 1000,
    "x": 1000,
    "y": 1500,
    "floor": 1,
    "field": 1,
    "num_member": 4,
    "members": [
      {
        "id": 1,
        "x": 1000,
        "y": 1500,
        "name": "Player1",
        "current_hp": 100,
        "max_hp": 100,
        "job": 1,
        "is_npc": 0,
        "guild_name": "TestGuild"
      }
    ],
    "actions": [],
    "results": [],
    "is_event": false,
    "from": "2024-01-01T00:00:00Z",
    "reward": {
      "exp": 100,
      "gold": 50
    }
  }
]
```

## ì„±ëŠ¥ ìµœì í™”

- **íƒ€ì¼ ê¸°ë°˜ ë Œë”ë§**: ëŒ€ìš©ëŸ‰ ë§µ ì´ë¯¸ì§€ë¥¼ íƒ€ì¼ë¡œ ë¶„í• í•˜ì—¬ ë¡œë”©
- **ë§ˆì»¤ í´ëŸ¬ìŠ¤í„°ë§**: 1000ê°œ ì´ìƒì˜ ë§ˆì»¤ ì‹œ í´ëŸ¬ìŠ¤í„°ë§ ì ìš©
- **í•„í„° ë””ë°”ìš´ì‹±**: ì‹¤ì‹œê°„ í•„í„°ë§ ì‹œ ì„±ëŠ¥ ìµœì í™”
- **ë©”ëª¨ë¦¬ ê´€ë¦¬**: ë¶ˆí•„ìš”í•œ ë°ì´í„° ì •ë¦¬ ë° ìºì‹±

## ê°œë°œ ê°€ì´ë“œ

### í´ë¦° ì•„í‚¤í…ì²˜
ì´ í”„ë¡œì íŠ¸ëŠ” í´ë¦° ì•„í‚¤í…ì²˜ íŒ¨í„´ì„ ë”°ë¦…ë‹ˆë‹¤:

- **Domain Layer**: ë¹„ì¦ˆë‹ˆìŠ¤ ì—”í‹°í‹°ì™€ ê·œì¹™
- **Application Layer**: ìœ ìŠ¤ì¼€ì´ìŠ¤ì™€ ì„œë¹„ìŠ¤
- **Infrastructure Layer**: ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ì˜ ì¸í„°í˜ì´ìŠ¤
- **Presentation Layer**: UI ì»´í¬ë„ŒíŠ¸ì™€ ìƒíƒœ ê´€ë¦¬

### ìƒíƒœ ê´€ë¦¬
- **Zustand**: ì „ì—­ ìƒíƒœ ê´€ë¦¬
- **React Query**: ì„œë²„ ìƒíƒœ ê´€ë¦¬ ë° ìºì‹±
- **Local State**: ì»´í¬ë„ŒíŠ¸ë³„ ë¡œì»¬ ìƒíƒœ

## í˜„ì¬ ìƒíƒœ

âœ… **ì™„ë£Œëœ ê¸°ëŠ¥**
- ê¸°ë³¸ í”„ë¡œì íŠ¸ êµ¬ì¡°
- í´ë¦° ì•„í‚¤í…ì²˜ êµ¬í˜„
- ë§µ ë·°ì–´ (ê¸°ë³¸ ë°°ê²½)
- ì „íˆ¬ ë§ˆì»¤ ì‹œìŠ¤í…œ
- íŒŒì¼ ì—…ë¡œë“œ ì»´í¬ë„ŒíŠ¸
- í•„í„° ì‹œìŠ¤í…œ
- ì „íˆ¬ ìƒì„¸ì •ë³´ íŒ¨ë„
- Mock API êµ¬í˜„

ğŸ”„ **ê°œì„  í•„ìš”**
- ì‹¤ì œ ë§µ íƒ€ì¼ ì´ë¯¸ì§€ ì¶”ê°€
- ë§ˆì»¤ í´ëŸ¬ìŠ¤í„°ë§ êµ¬í˜„
- ì„±ëŠ¥ ìµœì í™”
- ì‹¤ì œ ë°±ì—”ë“œ API ì—°ë™

## ë¼ì´ì„ ìŠ¤

ì´ í”„ë¡œì íŠ¸ëŠ” MIT ë¼ì´ì„ ìŠ¤ í•˜ì— ë°°í¬ë©ë‹ˆë‹¤.
